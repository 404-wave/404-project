<!-- Reason for having the templates folder at the root.-->
<!-- https://stackoverflow.com/questions/54730747/how-do-i-use-a-template-from-one-app-in-another-app/54731001#54731001 -->
<!-- templates/home.html -->
<!-- Note: we can change this to be more robust by redirecting to a different homepage if the user is not authenticated -->
<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>

<body>
	{% extends "base.html" %} {% load static %} {% block script %} <!-- jQuery -->
	 
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
	</script> <!-- Bootstrap-->
	 <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js">
	</script>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"><!-- Style-->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"><!-- Javascript-->
  <script src="{% static  'js/home.js'  %}"></script> 
  <link rel="stylesheet" href="{% static 'style/home.css' %}">
  <!-- Cloudflare-->
	 
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script> 
	<script>

	 window.onload = function(){
	   setTabs();
	   setEmptyMessage();
	 }
	 function private(){
	   var values = $("#id_privacy").val();
	 if(values == 1){
	   $("#id_accessible_users").parent().show();
	 }
	 else
	   $("#id_accessible_users").parent().hide();
	 }

	$("#id_privacy").change(function(){
	 private();
	})
	private();

	function edit(){

	}

	</script> 
  {% endblock %} 
  {% block content %} 
  {% if user.is_authenticated %}
	<div class="wrapper" id="home_wrapper">
		<div id="postContainer">
        <div id="createPost_tabs">
          <ul class="tabs">
              <li>
                <a class="showing" href="#" id="create_post" name="tab1">
                  <img alt="Create a post" src="{%  static  'images/create_post.png'  %}" width="30">
                    <span id="XXX">Create A Post</span></a>
              </li>
              <li>
                <a href="#" id="upload_image" name="tab2"> <img alt="Create a post" src="{%  static  'images/upload_image.png'  %}" width="30"><span id="XXX">Upload an Image</span></a>
              </li>
            </ul>
      		</div>
          <div id="createPost">
				<form action="" enctype="multipart/form-data" method="post" novalidate="">
					{% csrf_token %}
					<div class="settings">
						<div class="text_Wrapper create_post">
              {{ form.content.errors }} <label for="{{ form.content.id_for_label }}"></label> 
              {{ form.content }}
            </div>
            <div class="fieldWrapper_photo upload_image">
                {{ form.image.errors }} <label for="{{ form.image.id_for_label }}"></label> {{ form.image }}
            </div>
						<div class="settingss">
							<div class="fieldWrapper_row">
								<div class="fieldWrapper_privacy">
                  {{ form.privacy.errors }} <label for="{{ form.privacy.id_for_label }}"></label> {{ form.privacy}} 
                  {{ form.accessible_users.errors }} <label for="{{ form.accessible_users.id_for_label }}"></label> {{ form.accessible_users }}
		
							</div>
							<div class="fieldWrapper_submit">
                {{ form.unlisted.errors }} <label for="{{ form.unlisted.id_for_label }}">Unlisted</label> {{ form.unlisted }} 
                <input class="wave_btn" type="submit" value="Share">
							</div>
						</div>
					</div>
				</form>{% if unlisted_instance %}
				<p>Your posts was created. Access it <a href="{{  unlisted_instance.get_detail_absolute_url  }}">Here</a></p>{% endif %}
      </div>
    </div>
			<div class="stream">
				<div class="stream_settings">
					<ul class="tabs">
						<li>
							<a class="showing" href="#" id="stream_post" name="tab1">Stream</a>
						</li>
						<li>
							<a href="#" id="github_post" name="tab2">Github</a>
						</li>
					</ul>
					<form action="" method="get">
						<input name="query" placeholder="Search posts" type="text" value="{{ request.GET.query }}"> <input type="submit" value="Search"> <a href="/home">Clear search</a>
					</form>
        </div>
        {% for obj in object_list %} <!-- check if is Post object -->
				 {% if obj.user %}
				<div class="stream_post">
					<div class="top_row">
						<div class="post_info">
							<div class="author_edit">
                <p class="author">{{ obj.user }}</p>
                <p class="post_date">{{ obj.timestamp }}</p>
							</div>
						</div>
						<p class="privacy"> {{ obj.get_privacy_display}}</p>
					</div>
					<div class="post_content">
            	<!--  So entire post is clickable http://jsfiddle.net/hf75B/1/ -->
                <a href="{{ obj.get_detail_absolute_url}}">
              <span class="link-span"></span>
              </a>
						<div class="caption">
							<!-- caption -->
							<p>{{ obj.content | linebreaks }}</p>

            </div>
            {% if obj.image %}
						<div class="image"><img alt="" src="{{  obj.image.url  }}"></div>
						{% endif %}
					</div><!-- caption -->
        </div>
        {% else %}
				<div class="github_post">
					<p>{{ obj }}</p>
        </div>
        {% endif %} 
        {% endfor %}
				<div class="github_post" id="empty_git" style="display:none">
					<p>You do not have any github posts.</p>
				</div>
			</div>
		</div>
  </div>
  {% endif %} 
  {% endblock %}
</body>
</html>